# ----- DB -----
spring.datasource.url=${DB_URL}
spring.datasource.username=${DB_USERNAME}
spring.datasource.password=${DB_PASSWORD}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# 本番は基本OFF（マイグレーションはFlyway/Liquibase推奨）
spring.sql.init.encoding=utf-8
spring.sql.init.mode=never

# HikariCP（Heroku向けチューニングのたたき台）
spring.datasource.hikari.maximum-pool-size=5
spring.datasource.hikari.minimum-idle=0
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=120000
spring.datasource.hikari.max-lifetime=180000
spring.datasource.hikari.keepalive-time=60000
# spring.datasource.hikari.leak-detection-threshold=2000 # 2s超の取得に警告（調査時のみ）

# ----- Mail (Mailgun) -----
spring.mail.host=${MAILGUN_SMTP_SERVER}
spring.mail.port=${MAILGUN_SMTP_PORT}
spring.mail.username=${MAILGUN_SMTP_LOGIN}
spring.mail.password=${MAILGUN_SMTP_PASSWORD}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true

# ----- Upload -----
spring.servlet.multipart.max-file-size=5MB

# ----- Stripe -----
stripe.api-key=${STRIPE_API_KEY}
stripe.success-url=${STRIPE_SUCCESS_URL}
stripe.cancel-url=${STRIPE_CANCEL_URL}
stripe.webhook-secret=${STRIPE_WEBHOOK_SECRET}
# （必要なら）stripe.publishable-key=${STRIPE_PUBLISHABLE_KEY}

# ----- Heroku経由のHTTPS判定/リダイレクトの安定化 -----
server.forward-headers-strategy=framework
# （任意）server.tomcat.threads.max=50
